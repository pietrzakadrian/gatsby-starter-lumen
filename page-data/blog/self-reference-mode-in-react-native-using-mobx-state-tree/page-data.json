{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/blog/self-reference-mode-in-react-native-using-mobx-state-tree","result":{"data":{"markdownRemark":{"id":"57d3e585-d4e0-5d69-b8a9-e2e5dbde7ebf","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2707a2aaf5cf7aaef2d0103e99357a44/e5166/thumbnail.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUBAwT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFzRskRjwP/xAAbEAABBAMAAAAAAAAAAAAAAAABAAMEEBETIv/aAAgBAQABBQLpSH9QM1xAYv8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECESAiMv/aAAgBAQAGPwIVLZnMcP/EABoQAQACAwEAAAAAAAAAAAAAAAEAQRARgTH/2gAIAQEAAT8hHe+xDA0NEB4nGAAKz//aAAwDAQACAAMAAAAQUM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhEDFRYZH/2gAIAQEAAT8QaPoE1iiru5A7WYiFMqmn13h8wENrxDxn/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2707a2aaf5cf7aaef2d0103e99357a44/8ac56/thumbnail.webp 240w,\n/static/2707a2aaf5cf7aaef2d0103e99357a44/d3be9/thumbnail.webp 480w,\n/static/2707a2aaf5cf7aaef2d0103e99357a44/e46b2/thumbnail.webp 960w,\n/static/2707a2aaf5cf7aaef2d0103e99357a44/92f8c/thumbnail.webp 1200w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2707a2aaf5cf7aaef2d0103e99357a44/09b79/thumbnail.jpg 240w,\n/static/2707a2aaf5cf7aaef2d0103e99357a44/7cc5e/thumbnail.jpg 480w,\n/static/2707a2aaf5cf7aaef2d0103e99357a44/6a068/thumbnail.jpg 960w,\n/static/2707a2aaf5cf7aaef2d0103e99357a44/e5166/thumbnail.jpg 1200w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2707a2aaf5cf7aaef2d0103e99357a44/6a068/thumbnail.jpg\"\n            alt=\"Thumbnail\"\n            title=\"Thumbnail\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>While I was programming my mobile application in React Native, using the <a href=\"https://github.com/infinitered/ignite\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ignite</a> stack (i.e. TypeScript and MobX-state-tree), I ran into a specific problem.<br>\nMy api response returns a list of categories and their subcategories, it looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"parentId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aa483650311248828289ee00385d7d34\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Clothing\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"active\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"children\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"parentId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"a515ae260223466f8e37471d279e6406\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Women\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"active\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"parentId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"a515ae260223466f8e37471d279e6406\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Men\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"active\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"parentId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"aa483650311248828289ee00385d7d34\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Free time &amp; electronics\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"active\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>There’s an interesting case here, because as you can see: in the <code class=\"language-text\">children</code> key, we return the same as the parent. How can I declare a model for this answer?</p>\n<h2 id=\"standard-attempt-to-solve-this-problem\" style=\"position:relative;\"><a href=\"#standard-attempt-to-solve-this-problem\" aria-label=\"standard attempt to solve this problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Standard attempt to solve this problem</h2>\n<p>The first thought comes to us programming it like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Instance<span class=\"token punctuation\">,</span> SnapshotOut<span class=\"token punctuation\">,</span> types <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx-state-tree\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Model description here for TypeScript hints.\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> CategoryModel <span class=\"token operator\">=</span> types<span class=\"token punctuation\">.</span><span class=\"token function\">model</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Category\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">props</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> types<span class=\"token punctuation\">.</span><span class=\"token function\">maybe</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  parentId<span class=\"token operator\">:</span> types<span class=\"token punctuation\">.</span><span class=\"token function\">maybe</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  name<span class=\"token operator\">:</span> types<span class=\"token punctuation\">.</span><span class=\"token function\">maybe</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  level<span class=\"token operator\">:</span> types<span class=\"token punctuation\">.</span><span class=\"token function\">maybe</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  children<span class=\"token operator\">:</span> types<span class=\"token punctuation\">.</span><span class=\"token function\">optional</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span><span class=\"token function\">array</span><span class=\"token punctuation\">(</span>CategoryModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">CategoryType</span> <span class=\"token operator\">=</span> Instance<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> CategoryModel<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Category</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">CategoryType</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">CategorySnapshotType</span> <span class=\"token operator\">=</span> SnapshotOut<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> CategoryModel<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">CategorySnapshot</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">CategorySnapshotType</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createCategoryDefaultModel</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  types<span class=\"token punctuation\">.</span><span class=\"token function\">optional</span><span class=\"token punctuation\">(</span>CategoryModel<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Unfortunately this cannot be done as the code will not be compiled.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Block-scoped variable 'CategoryModel' used before its declaration. ts(2448)</code></pre></div>\n<h2 id=\"the-good-solution-to-this-problem\" style=\"position:relative;\"><a href=\"#the-good-solution-to-this-problem\" aria-label=\"the good solution to this problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The good solution to this problem</h2>\n<p>To program this model correctly, you need to do it like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span> children: types.optional(types.array(CategoryModel), []),\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span> children: types.optional(types.array(types.late(() => CategoryModel)), []),</span></code></pre></div>\n<p>Voilà! You achieved exactly what you wanted. 🙌<br>\nNow you can enjoy working and well-written source code.</p>\n<hr>\n<p>In this article, I have introduced you to all the tools I use in my work as a full-stack software engineer.</p>\n<p>You can also find this article on <a href=\"https://medium.com/@pietrzakadrian\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">medium.com</a> where I share my solutions to the problems I encountered during my software engineer career.</p>","timeToRead":2,"fields":{"slug":"/posts/2021-11-01---Self-reference-mode-in-react-native-using-mobx-state-tree//blog/self-reference-mode-in-react-native-using-mobx-state-tree","tagSlugs":["/blog/tag/typescript/","/blog/tag/react-native/"]},"frontmatter":{"date":"2021-11-01T22:40:32.169Z","description":"While I was programming my mobile application in React Native, using the Ignite stack (i.e. TypeScript and MobX-state-tree), I ran into a specific problem. My api response returns a list of categories and their subcategories, it looks like this...","tags":["TypeScript","React Native"],"title":"Self reference model in React Native using MobX-state-tree","socialImage":{"publicURL":"/static/2707a2aaf5cf7aaef2d0103e99357a44/thumbnail.jpeg"}}},"allMarkdownRemark":{"edges":[{"node":{"timeToRead":21,"fields":{"tagSlugs":["/blog/tag/typescript/","/blog/tag/nodejs/","/blog/tag/nestjs/"],"categorySlug":"/blog/category/software-engineering/"},"frontmatter":{"title":"NestJS Authentication Series 🔐: Part 1 - User registration","slug":"/blog/nestjs-authentication-series/user-registration","date":"2022-02-13T22:40:32.169Z","category":"Software Engineering","description":"Welcome you to my blog series on user authentication in the NestJS framework. This series is a set of several tutorials that extend the official documentation. If you are programming an enterprise application, you will most likely want to include full user support, i.e. email account confirmation, password reminder capability, etc. This post is the first part in a series and below you can find a list of all the other articles on this topic.","tags":["TypeScript","NodeJS","NestJS"],"socialImage":{"publicURL":"/static/917b994c0ced5f3b467420f6e0010217/thumbnail.jpeg"}}}},{"node":{"timeToRead":11,"fields":{"tagSlugs":["/blog/tag/nodejs/","/blog/tag/typescript/","/blog/tag/nestjs/"],"categorySlug":"/blog/category/software-engineering/"},"frontmatter":{"title":"How to create a microservice that handles 🎢 the queue of sending emails in NestJS","slug":"/blog/how-to-create-a-microservice-that-handles-the-queue-of-sending-emails-in-nestjs","date":"2021-12-01T12:40:32.169Z","category":"Software Engineering","description":"In this article, I will present you independent microservice that handles the queue of sending emails using the Node.js platform with the NestJS framework. The use of this microservice allows you to decouple the business logic of the email senders from the main monolithic application, resulting in less use of server resources and therefore faster source code execution.","tags":["NodeJS","TypeScript","NestJS"],"socialImage":{"publicURL":"/static/5d7467fd82762ea414353f94589606ed/thumbnail.jpeg"}}}}]}},"pageContext":{"slug":"/posts/2021-11-01---Self-reference-mode-in-react-native-using-mobx-state-tree//blog/self-reference-mode-in-react-native-using-mobx-state-tree","groups":["TypeScript","React Native"],"id":"57d3e585-d4e0-5d69-b8a9-e2e5dbde7ebf"}},"staticQueryHashes":["251939775","2764776372","401334301","63107425"]}