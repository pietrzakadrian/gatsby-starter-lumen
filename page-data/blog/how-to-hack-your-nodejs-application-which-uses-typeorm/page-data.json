{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/blog/how-to-hack-your-nodejs-application-which-uses-typeorm","result":{"data":{"markdownRemark":{"id":"2de03d5a-107e-5f54-826a-fe0a7c9f0406","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e4d9e5ea69d6824f2b97db97a897aa2/e5166/thumbnail.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCBAb/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQP/2gAMAwEAAhADEAAAAXCt1maIFcWf/8QAGhABAAIDAQAAAAAAAAAAAAAAAQIDAAQRE//aAAgBAQABBQLss3r3JcUOCE7bl9P/xAAYEQACAwAAAAAAAAAAAAAAAAAAAgERIf/aAAgBAwEBPwF2ohcP/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BJ//EAB0QAAIBBAMAAAAAAAAAAAAAAAABAgMQESFBUaH/2gAIAQEABj8C5FTi8dm4e2bltjP/xAAcEAACAgIDAAAAAAAAAAAAAAAAAREhMUFRkaH/2gAIAQEAAT8hW1dBC2Zv4WUj5CIFoSNIzKsH/9oADAMBAAIAAwAAABBAL//EABgRAQEAAwAAAAAAAAAAAAAAAAEAESGx/9oACAEDAQE/EAG5kOe3/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/EBq//8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFBYZHB/9oACAEBAAE/EB1YPAuIEKjnDs+vUdXMHTBw0Cjbm5IFXmOBxQMMJ//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6e4d9e5ea69d6824f2b97db97a897aa2/8ac56/thumbnail.webp 240w,\n/static/6e4d9e5ea69d6824f2b97db97a897aa2/d3be9/thumbnail.webp 480w,\n/static/6e4d9e5ea69d6824f2b97db97a897aa2/e46b2/thumbnail.webp 960w,\n/static/6e4d9e5ea69d6824f2b97db97a897aa2/92f8c/thumbnail.webp 1200w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6e4d9e5ea69d6824f2b97db97a897aa2/09b79/thumbnail.jpg 240w,\n/static/6e4d9e5ea69d6824f2b97db97a897aa2/7cc5e/thumbnail.jpg 480w,\n/static/6e4d9e5ea69d6824f2b97db97a897aa2/6a068/thumbnail.jpg 960w,\n/static/6e4d9e5ea69d6824f2b97db97a897aa2/e5166/thumbnail.jpg 1200w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6e4d9e5ea69d6824f2b97db97a897aa2/6a068/thumbnail.jpg\"\n            alt=\"Thumbnail\"\n            title=\"Thumbnail\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<blockquote>\n<p><strong>Note</strong>: The below article is applicable to TypeORM in version 0.2.37 (released on 08/13/2021). Before reading, check if there is already a new version with a solution to this issue: <a href=\"https://github.com/typeorm/typeorm/releases\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">github.com/typeorm/typeorm/releases</a></p>\n</blockquote>\n<p>Among Node.js developers there is a constant struggle to choose the best ORM library. I most often choose TypeORM in my projects and although¬†I think it is the best ORM, it has its drawbacks.</p>\n<p>In today‚Äôs article, I‚Äôll show you how you can stupidly make a huge mistake and let your application be hacked by accidentally granting root access. It may sound spicy, <strong>but it is</strong>! üå∂</p>\n<p>For the purposes of this article, I have prepared a simple application using Nest.js framework with user authorization and access roles. You can find the repository with source code <a href=\"https://github.com/pietrzakadrian/nestjs-typeorm-findone\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.</p>\n<hr>\n<h2 id=\"general-problem\" style=\"position:relative;\"><a href=\"#general-problem\" aria-label=\"general problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>General problem</h2>\n<p>The problem applies to the function¬†<code class=\"language-text\">.findOne()</code> available in the entity repository. Most CRUD applications use this method. It‚Äôs about searching for¬†a record.</p>\n<p>When you pass <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code> to the argument, <strong>you always get the first result in the table as a result</strong>!</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@nestjs/common\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserEntity <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../entities/user.entity\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserRepository <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../repositories/user.repository\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> _userRepository<span class=\"token operator\">:</span> UserRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">async</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>UserEntity<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The contributors of the library are well aware of this problem. This is where the discussion takes place: <a href=\"https://github.com/typeorm/typeorm/issues/2500\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">#2500</a>. On 16 May 2020, @pleerock <a href=\"https://github.com/typeorm/typeorm/issues/2500#issuecomment-629549738\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">wrote</a> the following comment:</p>\n<blockquote>\n<p>Since this is a breaking, fix will be available in the next branch.</p>\n</blockquote>\n<p>Unfortunately, after more than a year, in spite of the release of newer versions, the bug still has not been fixed. It doesn‚Äôt look good. üòè</p>\n<hr>\n<h2 id=\"why-is-it-dangerous-to-your-nodejs-application\" style=\"position:relative;\"><a href=\"#why-is-it-dangerous-to-your-nodejs-application\" aria-label=\"why is it dangerous to your nodejs application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why is it dangerous to your Node.js application?</h2>\n<p>The¬†<code class=\"language-text\">.findOne()</code> function with the argument <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code> will execute the following SQL query:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"id\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_id\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"firstName\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_firstName\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"lastName\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_lastName\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"username\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_username\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"password\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_password\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"role\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_role\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"createdAt\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_createdAt\"</span>\n<span class=\"token keyword\">FROM</span>\n\t<span class=\"token string\">\"users\"</span> <span class=\"token string\">\"UserEntity\"</span>\n<span class=\"token keyword\">LIMIT</span> <span class=\"token number\">1</span></code></pre></div>\n<p>As you can see, there is no <code class=\"language-text\">WHERE</code> statement. This means it will return the first result from the table.<br>\nAnd do you know who the first user in the database is usually?</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"firstName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Adrian\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"lastName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Pietrzak\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"username\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"contact@pietrzakadrian.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"password\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$2b$10$93pNQaRzK4JxddXLawC98euwXDNXocOh0hHVbatO1Up0DWJCBjOzK\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"role\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ADMIN_ROLE\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"createdAt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2021-08-27T09:02:47.661Z\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Yes, this is an administrator account. üò≥</p>\n<hr>\n<h2 id=\"how-can-this-software-be-hacked\" style=\"position:relative;\"><a href=\"#how-can-this-software-be-hacked\" aria-label=\"how can this software be hacked permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How can this software be hacked?</h2>\n<p>If you are programming in TypeScript, the chance of making this mistake is impossible. üíô<br>\nHowever, most node.js applications are written in JavaScript, which does not care about the proper and existing types. Now I will show you how to make a mistake that will cost us a lot.</p>\n<p>Look, this is what my JWT token looks like with a logged in user:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjIsImlhdCI6MTYzMDA1NTA0MCwiZXhwIjoxNjMwMDU4NjQwfQ.rlNavGjpS4x-_AgL5CwZvhpmMi50FJm7Rp-PK6_d-0Y</code></pre></div>\n<p>It contains the following structure after decoding:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"userId\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"iat\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1630055040</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"exp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1630058640</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p><strong>Note</strong>: The user with id <strong>2</strong> is a regular user with the <code class=\"language-text\">USER_ROLE</code> role.</p>\n</blockquote>\n<p>Now, after logging in, I want to call the controller to receive data about me:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Controller<span class=\"token punctuation\">,</span> Get<span class=\"token punctuation\">,</span> Req<span class=\"token punctuation\">,</span> UseGuards <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@nestjs/common\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Roles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"src/auth/decorators/roles.decorator\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> JwtAuthenticationGuard <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"src/auth/guards/jwt-authentication.guard\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> RolesGuard <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"src/auth/guards/roles.guard\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> RequestWithUser <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"src/auth/interfaces/request-with-user.interface\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> RoleType <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../constants/role-type.constant\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserEntity <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../entities/user.entity\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Controller</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Users\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserController</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Get</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Roles</span></span><span class=\"token punctuation\">(</span>RoleType<span class=\"token punctuation\">.</span><span class=\"token constant\">ADMIN</span><span class=\"token punctuation\">)</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">UseGuards</span></span><span class=\"token punctuation\">(</span>JwtAuthenticationGuard<span class=\"token punctuation\">,</span> RolesGuard<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">async</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Req</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> request<span class=\"token operator\">:</span> RequestWithUser<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>UserEntity<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> request<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This controller is only available for the <code class=\"language-text\">ADMIN_ROLE</code> role. Decorators in TypeScript are read from bottom to top, so first I am using the JWT authentication guard which is written like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@nestjs/common\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AuthGuard <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@nestjs/passport\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtAuthenticationGuard</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AuthGuard</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jwt\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>This is related to the following strategy:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@nestjs/common\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ConfigService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@nestjs/config\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PassportStrategy <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@nestjs/passport\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Request <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ExtractJwt<span class=\"token punctuation\">,</span> Strategy <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"passport-jwt\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserEntity <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"src/user/entities/user.entity\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"src/user/services/user.service\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtStrategy</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">PassportStrategy</span><span class=\"token punctuation\">(</span>Strategy<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> configService<span class=\"token operator\">:</span> ConfigService<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> userService<span class=\"token operator\">:</span> UserService<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      jwtFromRequest<span class=\"token operator\">:</span> ExtractJwt<span class=\"token punctuation\">.</span><span class=\"token function\">fromExtractors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">(</span>request<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> request<span class=\"token operator\">?.</span>cookies<span class=\"token operator\">?.</span>Authentication<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      secretOrKey<span class=\"token operator\">:</span> configService<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JWT_SECRET\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/**\n   * @param payload here is the decoded data from JWT token, e.g. { userId: 2, ... }\n   */</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">validate</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>UserEntity<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService<span class=\"token punctuation\">.</span><span class=\"token function\">getUserById</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you can see, I use the¬†<code class=\"language-text\">.getUserById(payload)</code> method to verify the user by the id encrypted in the token. I‚Äôm passing a payload object and trying to find a user for <code class=\"language-text\">payload.id</code>. <strong>Such a key does not exist in the object!</strong> The user id is in the <code class=\"language-text\">payload.userId</code> key, so <code class=\"language-text\">payload.id</code> <strong>is undefined</strong>!</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@nestjs/common\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserEntity <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../entities/user.entity\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserRepository <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../repositories/user.repository\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> _userRepository<span class=\"token operator\">:</span> UserRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">async</span> <span class=\"token function\">getUserById</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>UserEntity<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">.</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"curl\"><pre class=\"language-curl\"><code class=\"language-curl\">curl --location --request GET &#39;http://localhost:3000/users&#39; \\\n--header &#39;Content-Type: application/json&#39; \\\n--header &#39;Cookie: Authentication=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjIsImlhdCI6MTYzMDA1NTA0MCwiZXhwIjoxNjMwMDU4NjQwfQ.rlNavGjpS4x-_AgL5CwZvhpmMi50FJm7Rp-PK6_d-0Y&#39;</code></pre></div>\n<blockquote>\n<p><strong>Note</strong>: You can decode this JWT token yourself here: <a href=\"https://jwt.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://jwt.io</a></p>\n</blockquote>\n<p>This will perform the SQL operation:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"id\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_id\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"firstName\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_firstName\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"lastName\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_lastName\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"username\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_username\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"password\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_password\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"role\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_role\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"createdAt\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_createdAt\"</span>\n<span class=\"token keyword\">FROM</span>\n\t<span class=\"token string\">\"users\"</span> <span class=\"token string\">\"UserEntity\"</span>\n<span class=\"token keyword\">LIMIT</span> <span class=\"token number\">1</span></code></pre></div>\n<p>And we get the same result as above:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"firstName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Adrian\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"lastName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Pietrzak\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"username\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"contact@pietrzakadrian.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"password\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$2b$10$93pNQaRzK4JxddXLawC98euwXDNXocOh0hHVbatO1Up0DWJCBjOzK\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"role\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ADMIN_ROLE\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"createdAt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2021-08-27T09:02:47.661Z\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>I am logged in as user with id = <strong>1</strong> and now I have access to all controllers with the <code class=\"language-text\">ADMIN_ROLE</code> role! üéâü§Ø</p>\n<hr>\n<h2 id=\"how-to-fix-this-threat\" style=\"position:relative;\"><a href=\"#how-to-fix-this-threat\" aria-label=\"how to fix this threat permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to fix this threat?</h2>\n<p><strong>Stop using¬†<code class=\"language-text\">.findOne()</code> directly from the repository!</strong> This is convenient, but you don‚Äôt have complete control over the SQL queries. Instead, always make your queries with¬†<code class=\"language-text\">.createQueryBuilder()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@nestjs/common\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserEntity <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../entities/user.entity\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> UserRepository <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../repositories/user.repository\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> _userRepository<span class=\"token operator\">:</span> UserRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getUserById</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>UserEntity<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> queryBuilder <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">createQueryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    queryBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user.id = :id\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> queryBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">getOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Even if you pass <code class=\"language-text\">null</code> to the argument, the SQL will be properly formulated:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"id\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_id\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"firstName\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_firstName\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"lastName\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_lastName\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"username\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_username\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"password\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_password\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"role\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_role\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"UserEntity\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"createdAt\"</span> <span class=\"token keyword\">AS</span> <span class=\"token string\">\"UserEntity_createdAt\"</span>\n<span class=\"token keyword\">FROM</span>\n\t<span class=\"token string\">\"users\"</span> <span class=\"token string\">\"UserEntity\"</span>\n<span class=\"token keyword\">WHERE</span>\n\t<span class=\"token string\">\"user\"</span><span class=\"token punctuation\">.</span><span class=\"token string\">\"id\"</span> <span class=\"token operator\">=</span> $<span class=\"token number\">1</span> <span class=\"token comment\">-- PARAMETERS: [null]</span></code></pre></div>\n<p>This SQL operation will return an empty result, not the first record in the database. Now our code is completely safe. üîê</p>\n<hr>\n<p>You can also find this article on <a href=\"https://medium.com/@pietrzakadrian\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">medium.com</a> where I share my solutions to the problems I encountered during my software engineer career.</p>","timeToRead":7,"fields":{"slug":"/posts/2021-08-29---How-to-hack-your-nodejs-application-which-uses-TypeORM//blog/how-to-hack-your-nodejs-application-which-uses-typeorm","tagSlugs":["/blog/tag/typescript/","/blog/tag/nodejs/","/blog/tag/typeorm/","/blog/tag/nestjs/"]},"frontmatter":{"date":"2021-08-29T20:40:32.169Z","description":"Among Node.js developers there is a constant struggle to choose the best ORM library. I most often choose TypeORM in my projects and although¬†I think it is the best ORM, it has its drawbacks. In today's article, I'll show you how you can stupidly make a huge mistake and let your application be hacked by accidentally granting root access. It may sound spicy, but it is! üå∂","tags":["TypeScript","NodeJS","TypeORM","NestJS"],"title":"üö® How to hack your Node.js application (which uses TypeORM)?","socialImage":{"publicURL":"/static/6e4d9e5ea69d6824f2b97db97a897aa2/thumbnail.jpeg"}}},"allMarkdownRemark":{"edges":[{"node":{"timeToRead":21,"fields":{"tagSlugs":["/blog/tag/typescript/","/blog/tag/nodejs/","/blog/tag/nestjs/"],"categorySlug":"/blog/category/software-engineering/"},"frontmatter":{"title":"NestJS Authentication Series üîê: Part 1 - User registration","slug":"/blog/nestjs-authentication-series/user-registration","date":"2022-02-13T22:40:32.169Z","category":"Software Engineering","description":"Welcome you to my blog series on user authentication in the NestJS framework. This series is a set of several tutorials that extend the official documentation. If you are programming an enterprise application, you will most likely want to include full user support, i.e. email account confirmation, password reminder capability, etc. This post is the first part in a series and below you can find a list of all the other articles on this topic.","tags":["TypeScript","NodeJS","NestJS"],"socialImage":{"publicURL":"/static/917b994c0ced5f3b467420f6e0010217/thumbnail.jpeg"}}}},{"node":{"timeToRead":11,"fields":{"tagSlugs":["/blog/tag/nodejs/","/blog/tag/typescript/","/blog/tag/nestjs/"],"categorySlug":"/blog/category/software-engineering/"},"frontmatter":{"title":"How to create a microservice that handles üé¢ the queue of sending emails in NestJS","slug":"/blog/how-to-create-a-microservice-that-handles-the-queue-of-sending-emails-in-nestjs","date":"2021-12-01T12:40:32.169Z","category":"Software Engineering","description":"In this article, I will present you independent microservice that handles the queue of sending emails using the Node.js platform with the NestJS framework. The use of this microservice allows you to decouple the business logic of the email senders from the main monolithic application, resulting in less use of server resources and therefore faster source code execution.","tags":["NodeJS","TypeScript","NestJS"],"socialImage":{"publicURL":"/static/5d7467fd82762ea414353f94589606ed/thumbnail.jpeg"}}}}]}},"pageContext":{"slug":"/posts/2021-08-29---How-to-hack-your-nodejs-application-which-uses-TypeORM//blog/how-to-hack-your-nodejs-application-which-uses-typeorm","groups":["TypeScript","NodeJS","TypeORM","NestJS"],"id":"2de03d5a-107e-5f54-826a-fe0a7c9f0406"}},"staticQueryHashes":["251939775","2764776372","401334301","63107425"]}